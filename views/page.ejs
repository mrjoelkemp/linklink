<html>
  <head>
    <% include header %>
    <link rel="stylesheet" href="//<%= currentHost %>/stylesheets/page.css?v=1.5" />
  </head>

  <body>

    <div class="linklink-header">
      <span class="app-name-small">
        <a href="//<%= currentHost %>"><span class="first">Link</span><span class="last">Link</span></a>
      </span>

      <span>:</span>

      <div class="instructions">
        <span> Click anywhere to create a link to that part of the page </span>
      </div>

      <div class="generated-link">
        <span>Here you go</span>
        <input></input>
        <a href="#" target="_blank">Preview</a>
      </div>
    </div>

    <div class="linklink-credits">
      <span>
        Deep-linked with
        <span class="app-name-baby">
          <a href="//<%= currentHost %>"><span class="first">Link</span><span class="last">Link</span></a>
        </span>
      </span>
    </div>

    <div class="linklink-content">
      <%- content %>
    </div>

    <script>
      ;(function () {
        // For quick parsing and scroll to location
        window.LL = {
          url: "<%= url %>",
          top: parseInt("<%= top %>", 10),
          path: "<%= path %>",

          /**
           * Returns the element at the given Xpath
           * @param  {String} xpath - An xpath representation generated by getXPath()
           * @return {DOM Node}
           */
          getElementByXpath: function(xpath) {
            return document.evaluate(xpath, document, null, 9, null).singleNodeValue;
          },

          /**
           * Returns the offset/scroll distance of the element from the body element
           * @param  {DOM Node} element
           * @return {Number}
           */
          getScrollTopToElement: function(element) {
            var bodyRect = document.body.getBoundingClientRect(),
                elemRect = element.getBoundingClientRect(),
                offset   = elemRect.top - bodyRect.top;

            return offset;
          }
        };

        var cushion = 100;

        if (window.LL.url) {
          // Links using the top as the indicator
          if (window.LL.top) {
            window.scrollTo(0, window.LL.top);

          // Links to the actual element
          } else if (window.LL.path) {
            window.LL.element = window.LL.getElementByXpath(window.LL.path);
            window.scrollTo(0, window.LL.getScrollTopToElement(window.LL.element) - cushion);
          }
        }
      })();
    </script>
    <script src="//<%= currentHost %>/javascripts/vendor/jquery-2.1.1.min.js"></script>
    <script src="//<%= currentHost %>/javascripts/page.js?v=1.4"></script>
  <body>
</html>